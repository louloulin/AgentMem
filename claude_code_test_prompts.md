# Claude Code æµ‹è¯•æç¤ºè¯é›†åˆ

è¿™ä¸ªæ–‡ä»¶åŒ…å«äº†ç”¨äºåœ¨Claude Codeä¸­æµ‹è¯•AgentMem MCPåŠŸèƒ½çš„æç¤ºè¯ã€‚

---

## ğŸ” Step 1: éªŒè¯è¿æ¥

```
/mcp
```

é¢„æœŸï¼šçœ‹åˆ° `agentmem` serverå·²è¿æ¥

---

## âœ… Step 2: æµ‹è¯•User Scope

### æµ‹è¯•2.1: æ·»åŠ User Scopeè®°å¿†

```
å¸®æˆ‘ä½¿ç”¨agentmem_add_memoryå·¥å…·æ·»åŠ ä¸€æ¡ç”¨æˆ·çº§è®°å¿†ã€‚

å‚æ•°ï¼š
- content: "æˆ‘å–œæ¬¢åœ¨æ—©ä¸Šå–å’–å•¡ï¼Œä¸‹åˆå–èŒ¶"
- scope_type: "user"
- user_id: "alice"
- memory_type: "Episodic"
```

### æµ‹è¯•2.2: æœç´¢User Scopeè®°å¿†

```
å¸®æˆ‘ä½¿ç”¨agentmem_search_memorieså·¥å…·æœç´¢aliceçš„è®°å¿†ã€‚

å‚æ•°ï¼š
- query: "é¥®æ–™"
- user_id: "alice"
- limit: 10
```

---

## âœ… Step 3: æµ‹è¯•Agent Scope

### æµ‹è¯•3.1: æ·»åŠ Agent Scopeè®°å¿†

```
å¸®æˆ‘ä½¿ç”¨agentmem_add_memoryå·¥å…·æ·»åŠ ä¸€æ¡Agentçº§è®°å¿†ã€‚

å‚æ•°ï¼š
- content: "æ˜å¤©ä¸‹åˆ2ç‚¹æœ‰é¡¹ç›®è¯„å®¡ä¼šè®®ï¼Œéœ€è¦å‡†å¤‡æ¼”ç¤ºæ–‡ç¨¿"
- scope_type: "agent"
- user_id: "alice"
- agent_id: "work_assistant"
- memory_type: "Episodic"
```

### æµ‹è¯•3.2: æ·»åŠ å¦ä¸€ä¸ªAgentçš„è®°å¿†

```
å¸®æˆ‘ä½¿ç”¨agentmem_add_memoryå·¥å…·æ·»åŠ ä¸€æ¡è®°å¿†åˆ°life_assistantã€‚

å‚æ•°ï¼š
- content: "å‘¨æœ«å»è¶…å¸‚ä¹°èœï¼šç‰›å¥¶ã€é¸¡è›‹ã€è”¬èœ"
- scope_type: "agent"
- user_id: "alice"
- agent_id: "life_assistant"
- memory_type: "Episodic"
```

### æµ‹è¯•3.3: éªŒè¯Agentéš”ç¦»

```
å¸®æˆ‘æœç´¢work_assistantçš„è®°å¿†ï¼Œå…³é”®è¯æ˜¯"ä¼šè®®"ã€‚
ç„¶åæœç´¢life_assistantçš„è®°å¿†ï¼Œå…³é”®è¯æ˜¯"è´­ç‰©"ã€‚
çœ‹çœ‹ä¸¤ä¸ªagentçš„è®°å¿†æ˜¯å¦æ­£ç¡®éš”ç¦»ã€‚
```

---

## âœ… Step 4: æµ‹è¯•Run Scopeï¼ˆä¸´æ—¶ä¼šè¯ï¼‰

### æµ‹è¯•4.1: æ·»åŠ Run Scopeè®°å¿†

```
å¸®æˆ‘ä½¿ç”¨agentmem_add_memoryå·¥å…·æ·»åŠ ä¸€æ¡ä¸´æ—¶ä¼šè¯è®°å¿†ã€‚

å‚æ•°ï¼š
- content: "å®éªŒç¬”è®°ï¼šæµ‹è¯•äº†æ–°çš„ç®—æ³•ï¼Œæ€§èƒ½æå‡äº†30%"
- scope_type: "run"
- user_id: "alice"
- run_id: "experiment-2025-11-07"
- memory_type: "Episodic"
```

---

## âœ… Step 5: æµ‹è¯•Session Scope

### æµ‹è¯•5.1: æ·»åŠ Session Scopeè®°å¿†

```
å¸®æˆ‘ä½¿ç”¨agentmem_add_memoryå·¥å…·æ·»åŠ ä¸€æ¡ä¼šè¯çº§è®°å¿†ã€‚

å‚æ•°ï¼š
- content: "è¿™æ¬¡å¯¹è¯ä¸»è¦è®¨è®ºäº†AI Agentçš„æ¶æ„è®¾è®¡"
- scope_type: "session"
- user_id: "alice"
- session_id: "chat-session-123"
- memory_type: "Episodic"
```

---

## âœ… Step 6: æµ‹è¯•è‡ªåŠ¨Scopeæ¨æ–­

### æµ‹è¯•6.1: ä¸æŒ‡å®šscope_type

```
å¸®æˆ‘ä½¿ç”¨agentmem_add_memoryå·¥å…·æ·»åŠ è®°å¿†ï¼Œ
ä¸æŒ‡å®šscope_typeï¼Œè®©ç³»ç»Ÿè‡ªåŠ¨æ¨æ–­ã€‚

å‚æ•°ï¼š
- content: "å­¦ä¹ äº†Rustç¼–ç¨‹è¯­è¨€çš„æ‰€æœ‰æƒç³»ç»Ÿ"
- user_id: "bob"
- memory_type: "Semantic"
```

é¢„æœŸï¼šç³»ç»Ÿåº”è¯¥è‡ªåŠ¨æ¨æ–­ä¸º"user" scope

---

## âœ… Step 7: æµ‹è¯•åˆ—å‡ºAgents

### æµ‹è¯•7.1: åˆ—å‡ºæ‰€æœ‰Agents

```
å¸®æˆ‘ä½¿ç”¨agentmem_list_agentså·¥å…·åˆ—å‡ºç³»ç»Ÿä¸­æ‰€æœ‰çš„agentsã€‚

å‚æ•°ï¼š
- limit: 20
```

---

## âœ… Step 8: æµ‹è¯•å¤æ‚åœºæ™¯

### æµ‹è¯•8.1: å¤šç»´åº¦è®°å¿†ç®¡ç†

```
æˆ‘éœ€è¦å»ºç«‹ä¸€ä¸ªå®Œæ•´çš„è®°å¿†ç³»ç»Ÿã€‚è¯·å¸®æˆ‘ï¼š

1. ä¸ºæˆ‘ï¼ˆaliceï¼‰æ·»åŠ ä¸ªäººåå¥½ï¼ˆuser scopeï¼‰ï¼š
   - å–œæ¬¢Rustç¼–ç¨‹
   - å‘¨æœ«å–œæ¬¢çˆ¬å±±
   - å–œæ¬¢é˜…è¯»æŠ€æœ¯åšå®¢

2. ä¸ºæˆ‘çš„å·¥ä½œåŠ©æ‰‹ï¼ˆwork_assistantï¼‰æ·»åŠ å·¥ä½œä»»åŠ¡ï¼ˆagent scopeï¼‰ï¼š
   - 11æœˆ15æ—¥é¡¹ç›®deadline
   - éœ€è¦å‡†å¤‡æŠ€æœ¯åˆ†äº«
   - å‘¨äº”ä¸‹åˆteam meeting

3. åˆ›å»ºä¸€ä¸ªä¸´æ—¶å®éªŒè®°å½•ï¼ˆrun scopeï¼‰ï¼š
   - run_id: "nlp-experiment-20251107"
   - å†…å®¹: æµ‹è¯•äº†BERTæ¨¡å‹åœ¨æƒ…æ„Ÿåˆ†æä»»åŠ¡ä¸Šçš„æ•ˆæœ

è¯·ä½¿ç”¨agentmem_add_memoryå·¥å…·ï¼Œä¸ºæ¯æ¡è®°å¿†æŒ‡å®šæ­£ç¡®çš„scope_typeã€‚
```

### æµ‹è¯•8.2: éªŒè¯Scopeéš”ç¦»

```
ç°åœ¨è¯·å¸®æˆ‘éªŒè¯scopeéš”ç¦»æ˜¯å¦æ­£å¸¸å·¥ä½œï¼š

1. æœç´¢aliceçš„user scopeè®°å¿†ï¼Œå…³é”®è¯"ç¼–ç¨‹"
2. æœç´¢work_assistantçš„agent scopeè®°å¿†ï¼Œå…³é”®è¯"deadline"
3. æœç´¢nlp-experiment-20251107è¿™ä¸ªrunçš„è®°å¿†ï¼Œå…³é”®è¯"BERT"

ç¡®è®¤æ¯ä¸ªæœç´¢åªè¿”å›å¯¹åº”scopeçš„è®°å¿†ã€‚
```

---

## âœ… Step 9: æµ‹è¯•Metadataå’Œé‡è¦æ€§

### æµ‹è¯•9.1: å¸¦Metadataçš„è®°å¿†

```
å¸®æˆ‘æ·»åŠ ä¸€æ¡å¸¦è¯¦ç»†metadataçš„è®°å¿†ï¼š

å‚æ•°ï¼š
- content: "å®Œæˆäº†AgentMemçš„å¤šç»´åº¦ScopeåŠŸèƒ½å®ç°"
- scope_type: "user"
- user_id: "developer"
- memory_type: "Episodic"
- importance: 0.9
- metadata: {"tags": ["achievement", "project", "milestone"], "project": "AgentMem", "date": "2025-11-07"}
```

---

## âœ… Step 10: ç«¯åˆ°ç«¯æµ‹è¯•

### æµ‹è¯•10.1: å®Œæ•´å·¥ä½œæµ

```
è®©æˆ‘ä»¬æ¨¡æ‹Ÿä¸€ä¸ªçœŸå®çš„ä½¿ç”¨åœºæ™¯ï¼š

åœºæ™¯ï¼šAliceæ˜¯ä¸€ä¸ªè½¯ä»¶å·¥ç¨‹å¸ˆï¼Œæœ‰ä¸¤ä¸ªAIåŠ©æ‰‹å¸®å¥¹ç®¡ç†å·¥ä½œå’Œç”Ÿæ´»ã€‚

è¯·å¸®æˆ‘å®Œæˆä»¥ä¸‹æ“ä½œï¼š

1. **ä¸ªäººä¿¡æ¯ï¼ˆUser Scopeï¼‰**
   - Aliceå–œæ¬¢ä½¿ç”¨Rustå’ŒPythonç¼–ç¨‹
   - å¥¹æ­£åœ¨å­¦ä¹ AI Agentæ¶æ„
   - å¥¹çš„å·¥ä½œæ—¶é—´æ˜¯å‘¨ä¸€åˆ°å‘¨äº”9:00-18:00

2. **å·¥ä½œåŠ©æ‰‹ï¼ˆWork Agent Scopeï¼‰**
   - agent_id: "work_agent"
   - ä»»åŠ¡ï¼š11æœˆ15æ—¥å‰å®ŒæˆAgentMemé¡¹ç›®
   - ä»»åŠ¡ï¼šå‡†å¤‡ä¸‹å‘¨çš„æŠ€æœ¯åˆ†äº«æ¼”è®²
   - ä»»åŠ¡ï¼šå®¡æŸ¥å›¢é˜Ÿæˆå‘˜çš„ä»£ç PR

3. **ç”Ÿæ´»åŠ©æ‰‹ï¼ˆLife Agent Scopeï¼‰**
   - agent_id: "life_agent"
   - æé†’ï¼šå‘¨å…­å»å¥èº«æˆ¿
   - æé†’ï¼šç»™å¦ˆå¦ˆæ‰“ç”µè¯
   - æé†’ï¼šäº¤æ°´ç”µè´¹

4. **ä¸´æ—¶é¡¹ç›®ç¬”è®°ï¼ˆRun Scopeï¼‰**
   - run_id: "agentmem-implementation"
   - ç¬”è®°ï¼šPhase 1-6å…¨éƒ¨å®Œæˆ
   - ç¬”è®°ï¼šæ‰€æœ‰æµ‹è¯•é€šè¿‡
   - ç¬”è®°ï¼šæ–‡æ¡£å·²æ›´æ–°

ä¸ºæ¯æ¡è®°å¿†ä½¿ç”¨æ­£ç¡®çš„scope_typeï¼Œç„¶åæœç´¢éªŒè¯å®ƒä»¬éƒ½è¢«æ­£ç¡®å­˜å‚¨å’Œéš”ç¦»ã€‚
```

---

## ğŸ¯ é¢„æœŸç»“æœ

æ¯ä¸ªæµ‹è¯•å®Œæˆåï¼Œæ‚¨åº”è¯¥çœ‹åˆ°ï¼š

1. âœ… **æˆåŠŸå“åº”**: `"success": true`
2. âœ… **Memory ID**: è¿”å›å”¯ä¸€çš„è®°å¿†ID
3. âœ… **Scopeä¿¡æ¯**: æ­£ç¡®çš„`scope_type`
4. âœ… **æœç´¢éš”ç¦»**: ä¸åŒscopeçš„è®°å¿†ä¸ä¼šäº’ç›¸å¹²æ‰°

---

## ğŸ“Š æµ‹è¯•æ£€æŸ¥æ¸…å•

- [ ] MCP Serverè¿æ¥æˆåŠŸ
- [ ] User Scopeæ·»åŠ å’Œæœç´¢
- [ ] Agent Scopeæ·»åŠ å’Œæœç´¢
- [ ] Run Scopeæ·»åŠ 
- [ ] Session Scopeæ·»åŠ 
- [ ] è‡ªåŠ¨Scopeæ¨æ–­
- [ ] Scopeéš”ç¦»éªŒè¯
- [ ] åˆ—å‡ºAgents
- [ ] Metadataæ”¯æŒ
- [ ] ç«¯åˆ°ç«¯å·¥ä½œæµ

---

## ğŸ”§ è°ƒè¯•æç¤º

å¦‚æœæŸä¸ªæµ‹è¯•å¤±è´¥ï¼š

1. **æ£€æŸ¥å“åº”**: çœ‹é”™è¯¯ä¿¡æ¯
2. **æ£€æŸ¥Backend**: `curl http://127.0.0.1:8080/health`
3. **æŸ¥çœ‹æ—¥å¿—**: Backendæ—¥å¿—ä¸­åº”è¯¥æœ‰è¯¦ç»†ä¿¡æ¯
4. **é‡è¯•**: æœ‰æ—¶ç½‘ç»œé—®é¢˜ä¼šå¯¼è‡´æš‚æ—¶å¤±è´¥

---

**å‡†å¤‡å¥½äº†å—ï¼Ÿæ‰“å¼€Claude Codeï¼Œå¼€å§‹æµ‹è¯•å§ï¼** ğŸš€

