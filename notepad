请按照 agentmem92.md 中制定的迁移计划，执行 AgentMem V4 架构的全面迁移工作。具体要求如下：

## 执行范围

按照 agentmem92.md 文档中的优先级顺序执行：

1. **Phase 4: Search引擎迁移** (15天计划)
   - 实现 SearchEngine trait 使用 Query V4
   - 迁移所有搜索引擎文件 (20个文件) 从 `&str` 到 `&Query`
   - 保持向后兼容性

2. **Phase 5: Storage层迁移** (12天计划)
   - 迁移 PostgreSQL 后端 (6个文件) 使用 Memory V4
   - 迁移向量存储后端 (12个文件) 使用 Memory V4
   - 使用转换层 (memory_to_db, db_to_memory)

3. **Phase 6: Legacy清理完成** (8天计划)
   - 移除所有 MemoryItem 使用 (20+ 文件)
   - 更新 API 层和 Server 层
   - 更新文档和示例

## 实施原则

- **最小改动原则** (最小改动原则): 每次只修改必要的代码，避免大规模重构
- **逐步迁移**: 一次完成一个模块/文件，不要同时修改多个不相关的文件
- **保持兼容**: 保留向后兼容的 API，添加 deprecated 标记
- **参考现有实现**: 参考已完成的 LibSQL 实现作为模板

## 代码分析要求

在修改每个文件之前：
1. 使用 codebase-retrieval 全面分析相关代码的依赖关系
2. 确认所有需要调用的类、函数、trait 的签名和实现
3. 检查是否有其他文件依赖当前修改的代码
4. 确保理解转换层的使用方式

## 测试要求

每完成一个阶段后：
1. 运行 `cargo build --release` 确保编译通过 (0个错误)
2. 运行 `cargo test` 确保所有测试通过
3. 如果测试失败，分析失败原因并修复
4. 为新增功能添加单元测试
5. 确保测试覆盖率 > 85%

## 文档更新要求

每完成一个 Phase 后，更新 agentmem92.md：
1. 在对应的 Phase 章节标记完成状态 (⏳ → ✅)
2. 更新"执行摘要"中的整体进度百分比
3. 更新"模块迁移状态详细分析"中相关 crate 的状态
4. 在"变更日志"章节添加新的条目，记录：
   - 完成日期
   - 完成的具体工作
   - 修改的文件列表
   - 遇到的问题和解决方案
   - 测试结果

## 输出要求

所有说明、注释、文档更新必须使用**中文**，包括：
- 代码注释
- 文档更新
- 变更日志
- 问题说明
- 解决方案描述

## 验收标准

- ✅ 编译错误: 0
- ✅ 测试通过率: 100%
- ✅ 所有 Phase 标记为完成
- ✅ agentmem92.md 文档完整更新
- ✅ 变更日志详细记录所有修改