# AgentMem + LangGraph é›†æˆç¤ºä¾‹

**çœŸå®å®ç°ï¼Œå¯¹æ ‡MIRIXçš„LangGraphé›†æˆ**

---

## ğŸ“Š åŠŸèƒ½ç‰¹æ€§

### 1. LangGraphé›†æˆ ğŸ”—
- âœ… StateGraphçŠ¶æ€å›¾ç®¡ç†
- âœ… æ¶ˆæ¯æµè½¬å’ŒçŠ¶æ€æŒä¹…åŒ–
- âœ… èŠ‚ç‚¹å’Œè¾¹çš„çµæ´»é…ç½®
- âœ… é”™è¯¯å¤„ç†å’Œé™çº§æœºåˆ¶

### 2. AgentMemè®°å¿†ç®¡ç† ğŸ§ 
- âœ… å¯¹è¯è®°å¿†å­˜å‚¨
- âœ… è¯­ä¹‰æœç´¢è®°å¿†æ£€ç´¢
- âœ… ä¸Šä¸‹æ–‡ç›¸å…³è®°å¿†æ³¨å…¥
- âœ… ç”¨æˆ·éš”ç¦»è®°å¿†

### 3. å¤šç”¨æˆ·æ”¯æŒ ğŸ‘¥
- âœ… ç”¨æˆ·åˆ›å»ºå’Œç®¡ç†
- âœ… ç”¨æˆ·è®°å¿†éš”ç¦»
- âœ… ç”¨æˆ·çŠ¶æ€è·Ÿè¸ª
- âœ… å¤šç”¨æˆ·å¹¶å‘æ”¯æŒ

### 4. å®¢æœå¯¹è¯åœºæ™¯ ğŸ’¬
- âœ… ä¸“ä¸šå®¢æœåŠ©æ‰‹
- âœ… å¯¹è¯å†å²ç®¡ç†
- âœ… é—®é¢˜è¿½è¸ªå’Œè§£å†³
- âœ… äº¤äº’å¼å¯¹è¯æ¨¡å¼

### 5. å¤šLLMæ”¯æŒ ğŸ¤–
- âœ… OpenAI GPT-3.5/GPT-4
- âœ… Anthropic Claude-3
- âœ… è‡ªåŠ¨é™çº§æœºåˆ¶
- âœ… å¯æ‰©å±•å…¶ä»–LLM

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
cd examples/demo-python-langchain

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å®‰è£…è‡³å°‘ä¸€ä¸ªLLMæä¾›å•†
pip install langchain-openai      # æˆ–
pip install langchain-anthropic
```

### 2. è®¾ç½®ç¯å¢ƒå˜é‡

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
# OpenAIï¼ˆæ¨èï¼‰
OPENAI_API_KEY=your-openai-api-key

# æˆ– Anthropic
# ANTHROPIC_API_KEY=your-anthropic-api-key
```

### 3. è¿è¡Œç¤ºä¾‹

```bash
python customer_support.py
```

---

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### åŸºç¡€å¯¹è¯

```python
from customer_support import AgentMemAdapter, create_graph, run_conversation
from langchain_openai import ChatOpenAI

# 1. åˆå§‹åŒ–AgentMem
agentmem = AgentMemAdapter("customer_support")

# 2. åˆå§‹åŒ–LLM
llm = ChatOpenAI(model="gpt-3.5-turbo")

# 3. åˆ›å»ºå›¾
graph = create_graph(agentmem, llm)

# 4. è¿è¡Œå¯¹è¯
run_conversation(
    graph, agentmem,
    "ä½ å¥½ï¼Œæˆ‘æƒ³äº†è§£äº§å“åŠŸèƒ½ã€‚",
    "Alice"
)
```

---

## ğŸ¨ è¾“å‡ºç¤ºä¾‹

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                â•‘
â•‘        ğŸ¤– AgentMem + LangGraph å®¢æœå¯¹è¯æ¼”ç¤º ğŸ¤–               â•‘
â•‘                                                                â•‘
â•‘          çœŸå®å®ç°ï¼Œå¯¹æ ‡MIRIX LangGraphé›†æˆ                   â•‘
â•‘                                                                â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš€ åˆå§‹åŒ–AgentMem...
âœ“ ä½¿ç”¨çœŸå®AgentMem

ğŸš€ åˆå§‹åŒ–LLM...
âœ“ ä½¿ç”¨ OpenAI GPT-3.5-Turbo

ğŸš€ åˆ›å»ºLangGraph...
âœ“ LangGraphåˆ›å»ºæˆåŠŸ

ğŸ’¬ å¼€å§‹å®¢æœå¯¹è¯æ¼”ç¤º...

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ‘¤ Alice: ä½ å¥½ï¼Œæˆ‘æƒ³äº†è§£ä¸€ä¸‹ä½ ä»¬çš„äº§å“åŠŸèƒ½ã€‚
ğŸ“ è®°å¿†å·²ä¿å­˜: ç”¨æˆ·é—®é¢˜: ä½ å¥½ï¼Œæˆ‘æƒ³äº†è§£ä¸€ä¸‹ä½ ä»¬çš„äº§å“åŠŸèƒ½...
ğŸ¤– AgentMem Support: æ‚¨å¥½Aliceï¼æˆ‘å¾ˆé«˜å…´ä¸ºæ‚¨ä»‹ç»æˆ‘ä»¬çš„äº§å“åŠŸèƒ½ã€‚
æˆ‘ä»¬çš„äº§å“ä¸»è¦åŒ…æ‹¬...
[è¯¦ç»†å›ç­”]

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ‘¤ Alice: æˆ‘é‡åˆ°äº†ä¸€ä¸ªç™»å½•é—®é¢˜ï¼Œæ€»æ˜¯æç¤ºå¯†ç é”™è¯¯ã€‚
ğŸ“ è®°å¿†å·²ä¿å­˜: ç”¨æˆ·é—®é¢˜: æˆ‘é‡åˆ°äº†ä¸€ä¸ªç™»å½•é—®é¢˜...
ğŸ¤– AgentMem Support: æˆ‘ç†è§£æ‚¨é‡åˆ°äº†ç™»å½•é—®é¢˜ã€‚è®©æˆ‘å¸®æ‚¨æ’æŸ¥...
[è¯¦ç»†è§£å†³æ–¹æ¡ˆ]

ğŸ” è¿›å…¥äº¤äº’å¼å¯¹è¯æ¨¡å¼
æç¤º: è¾“å…¥ 'quit', 'exit' æˆ– 'bye' é€€å‡º

ä½ : åˆšæ‰çš„è§£å†³æ–¹æ¡ˆæœ‰æ•ˆå—ï¼Ÿ
ğŸ“ è®°å¿†å·²ä¿å­˜: ç”¨æˆ·é—®é¢˜: åˆšæ‰çš„è§£å†³æ–¹æ¡ˆæœ‰æ•ˆå—...
ğŸ¤– AgentMem Support: æ ¹æ®ä¹‹å‰çš„å¯¹è¯è®°å½•ï¼Œæˆ‘æ³¨æ„åˆ°æ‚¨å°è¯•äº†é‡ç½®å¯†ç ...
[åŸºäºè®°å¿†çš„å›ç­”]

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                â•‘
â•‘           âœ¨ AgentMem + LangGraph æ¼”ç¤ºå®Œæˆï¼âœ¨              â•‘
â•‘                                                                â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### çŠ¶æ€å›¾ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    START    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Chatbot    â”‚â—„â”€â”€â”€ AgentMemè®°å¿†æ£€ç´¢
â”‚   Node      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     END     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æµ

```
ç”¨æˆ·è¾“å…¥ â†’ LangGraph State
           â†“
      AgentMemæ£€ç´¢ç›¸å…³è®°å¿†
           â†“
      æ„å»ºç³»ç»Ÿæç¤ºï¼ˆå«è®°å¿†ï¼‰
           â†“
      LLMç”Ÿæˆå›ç­”
           â†“
      ä¿å­˜å¯¹è¯åˆ°AgentMem
           â†“
      è¿”å›å“åº”
```

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. AgentMemAdapter

**åŠŸèƒ½**:
- ç»Ÿä¸€AgentMemæ¥å£
- æ”¯æŒçœŸå®å’Œæ¨¡æ‹Ÿæ¨¡å¼
- ç”¨æˆ·ç®¡ç†
- è®°å¿†æ£€ç´¢

**æ–¹æ³•**:
```python
adapter = AgentMemAdapter("agent_id")

# åˆ›å»ºç”¨æˆ·
user = adapter.create_user("Alice")

# æ·»åŠ è®°å¿†
adapter.add_memory("å¯¹è¯å†…å®¹", user_id)

# æå–è®°å¿†
memories = adapter.extract_memories("æŸ¥è¯¢", user_id, limit=5)
```

### 2. create_chatbot

**åŠŸèƒ½**:
- LangGraph chatbotèŠ‚ç‚¹
- è®°å¿†æ£€ç´¢å’Œæ³¨å…¥
- LLMè°ƒç”¨
- é”™è¯¯å¤„ç†

**æµç¨‹**:
1. æå–ç›¸å…³è®°å¿†
2. æ„å»ºç³»ç»Ÿæç¤º
3. è°ƒç”¨LLM
4. ä¿å­˜å¯¹è¯è®°å¿†
5. è¿”å›å“åº”

### 3. create_graph

**åŠŸèƒ½**:
- åˆ›å»ºLangGraphçŠ¶æ€å›¾
- é…ç½®èŠ‚ç‚¹å’Œè¾¹
- ç¼–è¯‘å›¾

### 4. run_conversation

**åŠŸèƒ½**:
- è¿è¡Œå•æ¬¡å¯¹è¯
- ç”¨æˆ·ç®¡ç†
- çŠ¶æ€å‡†å¤‡
- å›¾æ‰§è¡Œ

---

## ğŸ”§ é…ç½®é€‰é¡¹

### LLMé…ç½®

```python
# OpenAI
from langchain_openai import ChatOpenAI
llm = ChatOpenAI(
    model="gpt-3.5-turbo",  # æˆ– "gpt-4"
    temperature=0.7,
    max_tokens=500
)

# Anthropic
from langchain_anthropic import ChatAnthropic
llm = ChatAnthropic(
    model="claude-3-sonnet-20240229",
    temperature=0.7,
    max_tokens=500
)
```

### AgentMemé…ç½®

```python
# è‡ªå®šä¹‰Agent ID
agentmem = AgentMemAdapter("custom_agent")

# è®°å¿†æ£€ç´¢é™åˆ¶
memories = agentmem.extract_memories(query, user_id, limit=10)
```

---

## ğŸ“Š å¯¹æ¯”MIRIX

| åŠŸèƒ½ | MIRIX | AgentMem (æœ¬ç¤ºä¾‹) | çŠ¶æ€ |
|------|-------|-------------------|------|
| **LangGraphé›†æˆ** | âœ… | âœ… | âœ… ç­‰æ•ˆ |
| **è®°å¿†æ£€ç´¢** | âœ… | âœ… | âœ… ç­‰æ•ˆ |
| **å¤šç”¨æˆ·æ”¯æŒ** | âœ… | âœ… | âœ… ç­‰æ•ˆ |
| **å®¢æœåœºæ™¯** | âœ… | âœ… | âœ… ç­‰æ•ˆ |
| **äº¤äº’å¼å¯¹è¯** | âœ… | âœ… | âœ… ç­‰æ•ˆ |
| **é™çº§æœºåˆ¶** | âš ï¸ åŸºç¡€ | âœ… å®Œæ•´ | âœ… **è¶…è¶Š** |
| **å¤šLLMæ”¯æŒ** | âš ï¸ Gemini | âœ… å¤šä¸ª | âœ… **è¶…è¶Š** |
| **å½©è‰²è¾“å‡º** | âŒ | âœ… | âœ… **è¶…è¶Š** |
| **æ¨¡æ‹Ÿæ¨¡å¼** | âŒ | âœ… | âœ… **è¶…è¶Š** |

---

## ğŸŠ æŠ€æœ¯äº®ç‚¹

1. **å®Œæ•´çš„LangGraphé›†æˆ** - å±•ç¤ºçœŸå®çš„StateGraphç”¨æ³•
2. **çµæ´»çš„AgentMemé€‚é…å™¨** - æ”¯æŒçœŸå®å’Œæ¨¡æ‹Ÿæ¨¡å¼
3. **å¤šLLMæä¾›å•†æ”¯æŒ** - OpenAI, Anthropic, å¯æ‰©å±•
4. **å®Œå–„çš„é”™è¯¯å¤„ç†** - é™çº§æœºåˆ¶å’Œå¼‚å¸¸æ•è·
5. **ç”¨æˆ·å‹å¥½çš„äº¤äº’** - å½©è‰²è¾“å‡ºå’Œæ¸…æ™°æç¤º
6. **ç”Ÿäº§å°±ç»ª** - å¯ç›´æ¥ç”¨äºå®é™…é¡¹ç›®

---

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜1: ImportError: No module named 'langgraph'

**è§£å†³æ–¹æ¡ˆ**:
```bash
pip install langgraph langchain-core
```

### é—®é¢˜2: ImportError: No module named 'agent_mem_python'

**è§£å†³æ–¹æ¡ˆ**:
```bash
# ç¼–è¯‘AgentMem Pythonç»‘å®š
cd ../../crates/agent-mem-python
maturin develop --release
```

æˆ–è€…ä½¿ç”¨æ¨¡æ‹Ÿæ¨¡å¼ï¼ˆè‡ªåŠ¨é™çº§ï¼‰ã€‚

### é—®é¢˜3: æœªæ‰¾åˆ°LLM API Key

**è§£å†³æ–¹æ¡ˆ**:
```bash
# è®¾ç½®ç¯å¢ƒå˜é‡
export OPENAI_API_KEY="your-key"
# æˆ–
export ANTHROPIC_API_KEY="your-key"
```

---

## ğŸ“š æ‰©å±•é˜…è¯»

- [LangGraphæ–‡æ¡£](https://python.langchain.com/docs/langgraph)
- [LangChainæ–‡æ¡£](https://python.langchain.com/)
- [AgentMemæ–‡æ¡£](../../README.md)
- [MIRIX LangGraphç¤ºä¾‹](https://github.com/Mirix-AI/MIRIX/blob/main/samples/langgraph_integration.py)

---

## ğŸ¯ ä¸‹ä¸€æ­¥

1. **æ‰©å±•åœºæ™¯**: æ·»åŠ æ›´å¤šå®¢æœåœºæ™¯ï¼ˆé€€æ¬¾ã€æŠ€æœ¯æ”¯æŒç­‰ï¼‰
2. **å¤šè½®å¯¹è¯**: å®ç°å¤æ‚çš„å¤šè½®å¯¹è¯ç®¡ç†
3. **å·¥å…·è°ƒç”¨**: é›†æˆLangChain Tools
4. **æµå¼è¾“å‡º**: å®ç°æµå¼å“åº”
5. **æŒä¹…åŒ–**: æ·»åŠ å¯¹è¯å†å²æŒä¹…åŒ–

---

**åˆ›å»ºæ—¥æœŸ**: 2025-10-24  
**ç‰ˆæœ¬**: 1.0.0  
**çŠ¶æ€**: âœ… å®Œæˆå¹¶éªŒè¯  
**å¯¹æ ‡**: MIRIX langgraph_integration.py (101è¡Œ) â†’ AgentMem (217è¡ŒåŠŸèƒ½æ›´å®Œæ•´)

