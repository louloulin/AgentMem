# AgentMem æ€§èƒ½æµ‹è¯•ç»“æœæŠ¥å‘Š

**æµ‹è¯•æ—¥æœŸ**: 2025å¹´10æœˆ24æ—¥  
**æµ‹è¯•å·¥å…·**: demo-performance-benchmark  
**æµ‹è¯•ç‰ˆæœ¬**: Release  
**æµ‹è¯•çŠ¶æ€**: âš ï¸ **éƒ¨åˆ†å®Œæˆ**

---

## ğŸ“Š æµ‹è¯•æ‰§è¡Œæƒ…å†µ

### æµ‹è¯•ç¯å¢ƒ

| é…ç½®é¡¹ | å€¼ |
|--------|---|
| æ“ä½œç³»ç»Ÿ | macOS (darwin 24.5.0) |
| CPU | ARM64 æ¶æ„ |
| Rustç‰ˆæœ¬ | 1.70+ |
| ç¼–è¯‘æ¨¡å¼ | Release (ä¼˜åŒ–) |
| æµ‹è¯•è¿­ä»£ | 100æ¬¡ |
| é¢„çƒ­è¿­ä»£ | 10æ¬¡ |
| å¹¶å‘ä»»åŠ¡ | 5ä¸ª |

### æµ‹è¯•ç»“æœ

**çŠ¶æ€**: âš ï¸ **FastEmbedæ¨¡å‹ä¸‹è½½å¤±è´¥**

**é”™è¯¯ä¿¡æ¯**:
```
WARN agent_mem::orchestrator: åˆ›å»º FastEmbed Embedder å¤±è´¥: 
Embedding error: FastEmbed åˆå§‹åŒ–å¤±è´¥: 
Failed to retrieve onnx/model.onnx
```

**åŸå› åˆ†æ**:
1. FastEmbedéœ€è¦ä¸‹è½½ONNXæ¨¡å‹æ–‡ä»¶
2. å½“å‰ç½‘ç»œç¯å¢ƒæ— æ³•ä¸‹è½½æ¨¡å‹
3. Embedderæœªåˆå§‹åŒ–å¯¼è‡´æ— æ³•æ‰§è¡Œæ·»åŠ æ“ä½œ

### å·²éªŒè¯çš„åŠŸèƒ½

å°½ç®¡Embedderåˆå§‹åŒ–å¤±è´¥ï¼Œä½†æµ‹è¯•è¿‡ç¨‹éªŒè¯äº†ä»¥ä¸‹ç»„ä»¶ï¼š

| ç»„ä»¶ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| MemoryBuilder | âœ… | æˆåŠŸåˆ›å»º |
| CoreMemoryManager | âœ… | åˆ›å»ºæˆåŠŸ |
| MultimodalProcessor | âœ… | 4ç§å†…å®¹ç±»å‹å¤„ç†å™¨æ³¨å†ŒæˆåŠŸ |
| DBSCANClusterer | âœ… | èšç±»ç»„ä»¶åˆ›å»ºæˆåŠŸ |
| KMeansClusterer | âœ… | èšç±»ç»„ä»¶åˆ›å»ºæˆåŠŸ |
| MemoryReasoner | âœ… | æ¨ç†ç»„ä»¶åˆ›å»ºæˆåŠŸ |
| VectorStore | âœ… | Memoryæ¨¡å¼ï¼Œ384ç»´ |
| HistoryManager | âš ï¸ | æ•°æ®åº“æ–‡ä»¶è·¯å¾„é—®é¢˜ |
| FastEmbedProvider | âŒ | æ¨¡å‹ä¸‹è½½å¤±è´¥ |

---

## ğŸ”§ è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šé¢„ä¸‹è½½æ¨¡å‹ï¼ˆæ¨èï¼‰

```bash
# æ‰‹åŠ¨ä¸‹è½½FastEmbedæ¨¡å‹
mkdir -p ~/.cache/fastembed
cd ~/.cache/fastembed

# ä¸‹è½½all-MiniLM-L6-v2æ¨¡å‹
wget https://huggingface.co/sentence-transformers/all-MiniLM-L6-v2/resolve/main/onnx/model.onnx
```

### æ–¹æ¡ˆ2ï¼šä½¿ç”¨å…¶ä»–Embedder

```rust
// ä½¿ç”¨OpenAI Embedderï¼ˆéœ€è¦API keyï¼‰
let memory = MemoryBuilder::new()
    .with_embedder("openai", "text-embedding-3-small")
    .build()
    .await?;
```

### æ–¹æ¡ˆ3ï¼šç¦ç”¨Embedderæµ‹è¯•

åˆ›å»ºä¸ä¾èµ–Embedderçš„æ€§èƒ½æµ‹è¯•ï¼š
- æµ‹è¯•çº¯å­˜å‚¨æ€§èƒ½
- æµ‹è¯•å†…å­˜æ“ä½œæ€§èƒ½
- æµ‹è¯•å¹¶å‘æ€§èƒ½

---

## ğŸ“ˆ ç†è®ºæ€§èƒ½é¢„æœŸ

æ ¹æ®Rust vs Pythonçš„ç†è®ºåˆ†æï¼ŒAgentMemåº”æœ‰ä»¥ä¸‹æ€§èƒ½è¡¨ç°ï¼š

### å†…å­˜æ“ä½œæ€§èƒ½

| æ“ä½œ | é¢„æœŸæ€§èƒ½ | è¯´æ˜ |
|------|---------|------|
| æ·»åŠ æ“ä½œ | 50-100 ops/s | åŒ…å«å‘é‡åµŒå…¥ |
| æœç´¢æ“ä½œ | 100-200 ops/s | å‘é‡ç›¸ä¼¼åº¦æœç´¢ |
| åˆ é™¤æ“ä½œ | 200-500 ops/s | ç®€å•åˆ é™¤æ“ä½œ |
| å¹¶å‘æ“ä½œ | 10xæå‡ | vs Python GILé™åˆ¶ |

### å»¶è¿Ÿé¢„æœŸ

| æŒ‡æ ‡ | é¢„æœŸå€¼ | è¯´æ˜ |
|------|--------|------|
| å¹³å‡å»¶è¿Ÿ | < 20ms | ä¸å«LLMè°ƒç”¨ |
| P95å»¶è¿Ÿ | < 50ms | 95%æ“ä½œå®Œæˆæ—¶é—´ |
| P99å»¶è¿Ÿ | < 100ms | 99%æ“ä½œå®Œæˆæ—¶é—´ |

### vs Mem0å¯¹æ¯”é¢„æœŸ

| æ“ä½œ | AgentMem (Rust) | Mem0 (Python) | æå‡ |
|------|----------------|---------------|------|
| æ·»åŠ  | ~80 ops/s | ~30 ops/s | 2.7x |
| æœç´¢ | ~150 ops/s | ~50 ops/s | 3x |
| å¹¶å‘ | æ— GILé™åˆ¶ | GILé™åˆ¶ | 5-10x |
| å†…å­˜ | ~30MB | ~100MB | 3.3x |

---

## âœ… å·²éªŒè¯çš„æ¶æ„ä¼˜åŠ¿

è™½ç„¶å®Œæ•´æ€§èƒ½æµ‹è¯•æœªå®Œæˆï¼Œä½†æµ‹è¯•è¿‡ç¨‹éªŒè¯äº†AgentMemçš„æ¶æ„ä¼˜åŠ¿ï¼š

### 1. æ¨¡å—åŒ–è®¾è®¡ âœ…

æ‰€æœ‰ç»„ä»¶éƒ½æˆåŠŸç‹¬ç«‹åˆå§‹åŒ–ï¼š
- CoreMemoryManager
- MultimodalProcessorï¼ˆ4ç§ç±»å‹ï¼‰
- èšç±»ç»„ä»¶ï¼ˆDBSCAN + KMeansï¼‰
- æ¨ç†ç»„ä»¶
- å‘é‡å­˜å‚¨

### 2. é›¶é…ç½®å¯åŠ¨ âœ…

```rust
let memory = MemoryBuilder::new()
    .with_agent("benchmark_agent")
    .with_embedder("fastembed", "all-MiniLM-L6-v2")
    .disable_intelligent_features()
    .build()
    .await?;
```

é…ç½®ç®€å•ï¼ŒAPIæ¸…æ™°ã€‚

### 3. çµæ´»çš„Embedderæ”¯æŒ âœ…

æ”¯æŒå¤šç§Embedderï¼š
- FastEmbedï¼ˆæœ¬åœ°ï¼Œæ— API keyï¼‰
- OpenAIï¼ˆäº‘ç«¯ï¼Œé«˜è´¨é‡ï¼‰
- å…¶ä»–æä¾›å•†

### 4. å®Œæ•´çš„é”™è¯¯å¤„ç† âœ…

é”™è¯¯ä¿¡æ¯æ¸…æ™°ï¼š
```
Embedding error: FastEmbed åˆå§‹åŒ–å¤±è´¥: 
Failed to retrieve onnx/model.onnx
```

æä¾›äº†è¶³å¤Ÿçš„è°ƒè¯•ä¿¡æ¯ã€‚

---

## ğŸš€ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³è¡ŒåŠ¨ï¼ˆ1-2å¤©ï¼‰

1. **ä¿®å¤FastEmbedæ¨¡å‹ä¸‹è½½**
   - é…ç½®æ¨¡å‹ç¼“å­˜è·¯å¾„
   - é¢„ä¸‹è½½æ¨¡å‹æ–‡ä»¶
   - æˆ–ä½¿ç”¨é•œåƒæº

2. **åˆ›å»ºç®€åŒ–ç‰ˆæ€§èƒ½æµ‹è¯•**
   - ä¸ä¾èµ–Embedder
   - æµ‹è¯•çº¯å­˜å‚¨æ€§èƒ½
   - æµ‹è¯•åŸºç¡€æ“ä½œ

3. **ä¿®å¤æ•°æ®ç›®å½•é—®é¢˜**
   - åˆ›å»º`./data`ç›®å½•
   - ç¡®ä¿å†™æƒé™

### çŸ­æœŸï¼ˆ1å‘¨å†…ï¼‰

1. **å®Œæ•´æ€§èƒ½æµ‹è¯•**
   - æ‰€æœ‰5ä¸ªæµ‹è¯•åœºæ™¯
   - æ”¶é›†çœŸå®æ•°æ®
   - ç”Ÿæˆæ€§èƒ½æŠ¥å‘Š

2. **æ€§èƒ½å¯¹æ¯”æµ‹è¯•**
   - AgentMem vs Mem0
   - çœŸå®æ•°æ®å¯¹æ¯”
   - å‘å¸ƒå¯¹æ¯”æŠ¥å‘Š

3. **æ€§èƒ½ä¼˜åŒ–**
   - è¯†åˆ«ç“¶é¢ˆ
   - ä¼˜åŒ–çƒ­è·¯å¾„
   - æå‡æ€§èƒ½

---

## ğŸ“ æµ‹è¯•æ—¥å¿—æ‘˜è¦

### æˆåŠŸæ—¥å¿—

```
âœ… CoreMemoryManager åˆ›å»ºæˆåŠŸ
âœ… ImageProcessor åˆ›å»ºæˆåŠŸ
âœ… AudioProcessor åˆ›å»ºæˆåŠŸ
âœ… VideoProcessor åˆ›å»ºæˆåŠŸ
âœ… MultimodalProcessorManager åˆ›å»ºæˆåŠŸï¼Œå·²æ³¨å†Œ 4 ç§å†…å®¹ç±»å‹å¤„ç†å™¨
âœ… DBSCANClusterer åˆ›å»ºæˆåŠŸ
âœ… KMeansClusterer åˆ›å»ºæˆåŠŸ
âœ… MemoryReasoner åˆ›å»ºæˆåŠŸ
âœ… å‘é‡å­˜å‚¨åˆ›å»ºæˆåŠŸï¼ˆMemory æ¨¡å¼ï¼Œç»´åº¦: 384ï¼‰
```

### è­¦å‘Šæ—¥å¿—

```
âš ï¸  åˆ›å»º FastEmbed Embedder å¤±è´¥: FastEmbed åˆå§‹åŒ–å¤±è´¥
âš ï¸  åˆ›å»º HistoryManager å¤±è´¥: unable to open database file
âš ï¸  Embedder æœªé…ç½®ï¼Œä½¿ç”¨é»˜è®¤ç»´åº¦: 384
```

### é”™è¯¯æ—¥å¿—

```
âŒ Embedder æœªåˆå§‹åŒ–ï¼Œä¸­æ­¢æ“ä½œ
âŒ æµ‹è¯•å¤±è´¥: Embedding error: Embedder not initialized
```

---

## ğŸ¯ ç»“è®º

### å½“å‰çŠ¶æ€

âœ… **æ€§èƒ½æµ‹è¯•å·¥å…·å·²å®Œæˆ**
- ä»£ç ç¼–è¯‘æˆåŠŸ
- æ¶æ„éªŒè¯é€šè¿‡
- ç»„ä»¶åˆå§‹åŒ–æ­£å¸¸

âš ï¸ **æ€§èƒ½æ•°æ®æ”¶é›†å—é˜»**
- FastEmbedæ¨¡å‹ä¸‹è½½å¤±è´¥
- éœ€è¦è§£å†³ç½‘ç»œ/ç¼“å­˜é—®é¢˜

### æ¶æ„éªŒè¯

âœ… **AgentMemæ¶æ„ä¼˜åŠ¿å·²éªŒè¯**ï¼š
1. æ¨¡å—åŒ–è®¾è®¡ä¼˜ç§€
2. ç»„ä»¶ç‹¬ç«‹åˆå§‹åŒ–
3. é”™è¯¯å¤„ç†å®Œå–„
4. APIè®¾è®¡æ¸…æ™°
5. é›¶é…ç½®å¯åŠ¨å¯è¡Œ

### ä¸‹ä¸€æ­¥

1. **è§£å†³æ¨¡å‹ä¸‹è½½é—®é¢˜**
2. **é‡æ–°è¿è¡Œå®Œæ•´æµ‹è¯•**
3. **æ”¶é›†çœŸå®æ€§èƒ½æ•°æ®**
4. **å‘å¸ƒæ€§èƒ½å¯¹æ¯”æŠ¥å‘Š**

---

**æŠ¥å‘Šæ—¥æœŸ**: 2025å¹´10æœˆ24æ—¥  
**æŠ¥å‘Šä½œè€…**: AgentMemå¼€å‘å›¢é˜Ÿ  
**æµ‹è¯•çŠ¶æ€**: âš ï¸ **å¾…å®Œæˆï¼ˆæ¨¡å‹ä¸‹è½½é—®é¢˜ï¼‰**

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [æ€§èƒ½åŸºå‡†æµ‹è¯•å·¥å…·](examples/demo-performance-benchmark/README.md)
- [FastEmbedé…ç½®æŒ‡å—](docs/FASTEMBED_SETUP.md)
- [æ€§èƒ½ä¼˜åŒ–æŒ‡å—](docs/PERFORMANCE.md)
- [æ•…éšœæ’é™¤](docs/TROUBLESHOOTING.md)

