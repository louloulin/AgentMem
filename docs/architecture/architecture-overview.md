# AgentMem æ¶æ„æ¦‚è§ˆ

**ç‰ˆæœ¬**: v3.0.0  
**æ›´æ–°æ—¥æœŸ**: 2025-12-10  
**çŠ¶æ€**: âœ… Phase 1-3 å·²å®Œæˆ

---

## ğŸ“‹ ç›®å½•

1. [ç³»ç»Ÿæ¶æ„](#ç³»ç»Ÿæ¶æ„)
2. [æ ¸å¿ƒç»„ä»¶](#æ ¸å¿ƒç»„ä»¶)
3. [æ•°æ®æµ](#æ•°æ®æµ)
4. [å­˜å‚¨æ¶æ„](#å­˜å‚¨æ¶æ„)
5. [æ€§èƒ½ä¼˜åŒ–](#æ€§èƒ½ä¼˜åŒ–)
6. [æ‰©å±•æ€§è®¾è®¡](#æ‰©å±•æ€§è®¾è®¡)

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    API Layer (agent-mem)                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Memory API  â”‚  â”‚ FluentMemory â”‚  â”‚ SmartDefaults â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Core Layer (agent-mem-core)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Orchestratorâ”‚  â”‚   Engine    â”‚  â”‚   Manager    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Scoring    â”‚  â”‚   Reranker  â”‚  â”‚   Context    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Persona    â”‚  â”‚ Filesystem  â”‚  â”‚   Search     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Storage Layer                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   LibSQL     â”‚  â”‚  PostgreSQL  â”‚  â”‚   Redis      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  LanceDB     â”‚  â”‚  Weaviate   â”‚  â”‚   Qdrant     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§© æ ¸å¿ƒç»„ä»¶

### 1. API Layer (`agent-mem`)

**èŒè´£**: æä¾›ç®€æ´æ˜“ç”¨çš„APIæ¥å£

**ä¸»è¦æ¨¡å—**:
- `Memory` - æ ¸å¿ƒAPI
- `FluentMemory` - é“¾å¼è°ƒç”¨API
- `SmartDefaults` - æ™ºèƒ½é»˜è®¤å€¼
- `EnhancedError` - é”™è¯¯å¤„ç†

**ç‰¹æ€§**:
- âœ… é›¶é…ç½®å¯åŠ¨
- âœ… é“¾å¼è°ƒç”¨æ”¯æŒ
- âœ… æ™ºèƒ½é»˜è®¤å€¼æ£€æµ‹
- âœ… å‹å¥½é”™è¯¯ä¿¡æ¯

### 2. Core Layer (`agent-mem-core`)

**èŒè´£**: å®ç°æ ¸å¿ƒä¸šåŠ¡é€»è¾‘

#### 2.1 Orchestrator (ç¼–æ’å™¨)

**åŠŸèƒ½**:
- æ‰¹é‡æ“ä½œç¼–æ’
- ä»»åŠ¡è°ƒåº¦
- é”™è¯¯æ¢å¤

**å®ç°**: `crates/agent-mem/src/orchestrator/`

#### 2.2 Engine (å¼•æ“)

**åŠŸèƒ½**:
- è®°å¿†ç®¡ç†
- æœç´¢æ‰§è¡Œ
- æŸ¥è¯¢å¤„ç†

**å®ç°**: `crates/agent-mem-core/src/engine.rs`

#### 2.3 Scoring (è¯„åˆ†ç³»ç»Ÿ)

**åŠŸèƒ½**:
- å¤šç»´åº¦è¯„åˆ†
- é‡è¦æ€§è®¡ç®—
- ç›¸å…³æ€§è¯„ä¼°

**å®ç°**: `crates/agent-mem-core/src/scoring/multi_dimensional.rs`

#### 2.4 Reranker (é‡æ’åº)

**åŠŸèƒ½**:
- å†…éƒ¨é‡æ’åºï¼ˆCross-encoderï¼‰
- LLMé‡æ’åº
- ç¼“å­˜ä¼˜åŒ–

**å®ç°**: `crates/agent-mem-core/src/search/external_reranker.rs`

#### 2.5 Context Enhancement (ä¸Šä¸‹æ–‡å¢å¼º)

**åŠŸèƒ½**:
- ä¸Šä¸‹æ–‡çª—å£æ‰©å±•
- å¤šè½®å¯¹è¯ç†è§£
- ä¸Šä¸‹æ–‡å‹ç¼©

**å®ç°**: `crates/agent-mem-core/src/context_enhancement.rs`

#### 2.6 Persona Extraction (Personaæå–)

**åŠŸèƒ½**:
- Personaæå–å¼•æ“
- åŠ¨æ€æ›´æ–°
- æ£€ç´¢ä¼˜åŒ–

**å®ç°**: `crates/agent-mem-core/src/persona_extraction.rs`

#### 2.7 Filesystem Integration (æ–‡ä»¶ç³»ç»Ÿé›†æˆ)

**åŠŸèƒ½**:
- CLAUDE.mdå…¼å®¹
- è‡ªåŠ¨åŠ è½½
- å¯¼å…¥ç³»ç»Ÿ

**å®ç°**: `crates/agent-mem-core/src/filesystem_integration.rs`

---

## ğŸ”„ æ•°æ®æµ

### æ·»åŠ è®°å¿†æµç¨‹

```
1. APIè°ƒç”¨
   â†“
2. Orchestratoræ¥æ”¶
   â†“
3. æ‰¹é‡é˜Ÿåˆ—å¤„ç†
   â†“
4. åµŒå…¥ç”Ÿæˆ
   â†“
5. å­˜å‚¨å†™å…¥ï¼ˆLibSQL + Vector Storeï¼‰
   â†“
6. ç¼“å­˜æ›´æ–°ï¼ˆRedisï¼‰
   â†“
7. è¿”å›ç»“æœ
```

### æœç´¢è®°å¿†æµç¨‹

```
1. APIè°ƒç”¨
   â†“
2. æŸ¥è¯¢è§£æ
   â†“
3. å‘é‡æœç´¢
   â†“
4. å¤šç»´åº¦è¯„åˆ†
   â†“
5. é‡æ’åºï¼ˆLLM/Cacheï¼‰
   â†“
6. ä¸Šä¸‹æ–‡å¢å¼º
   â†“
7. Personaä¼˜åŒ–
   â†“
8. è¿”å›ç»“æœ
```

---

## ğŸ’¾ å­˜å‚¨æ¶æ„

### åˆ†å±‚å­˜å‚¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      L1 Cache (å†…å­˜)                 â”‚
â”‚  - çƒ­ç‚¹æ•°æ®                          â”‚
â”‚  - LRUæ›¿æ¢ç­–ç•¥                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      L2 Cache (Redis)               â”‚
â”‚  - å¸¸ç”¨æ•°æ®                          â”‚
â”‚  - TTLè¿‡æœŸç­–ç•¥                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Primary Storage (LibSQL)       â”‚
â”‚  - ç»“æ„åŒ–æ•°æ®                        â”‚
â”‚  - å…ƒæ•°æ®                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Vector Store (LanceDB)         â”‚
â”‚  - å‘é‡åµŒå…¥                          â”‚
â”‚  - ç›¸ä¼¼åº¦æœç´¢                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®ä¸€è‡´æ€§

**ç­–ç•¥**:
- âœ… äº‹åŠ¡ä¿è¯
- âœ… è¡¥å¿æœºåˆ¶ï¼ˆå›æ»šï¼‰
- âœ… æ•°æ®æ ¡éªŒ
- âœ… æ‰¹é‡æ“ä½œä¸€è‡´æ€§

---

## âš¡ æ€§èƒ½ä¼˜åŒ–

### Phase 1 ä¼˜åŒ–æˆæœ

1. **æ‰¹é‡æ“ä½œä¼˜åŒ–**
   - æ‰¹é‡åµŒå…¥é˜Ÿåˆ—
   - æ‰¹é‡æ•°æ®åº“å†™å…¥
   - å¹¶è¡Œå¤„ç†

2. **Redisç¼“å­˜é›†æˆ**
   - L2ç¼“å­˜å±‚
   - ç¼“å­˜é¢„çƒ­
   - ç»Ÿè®¡ç›‘æ§

3. **KV-cacheå†…å­˜æ³¨å…¥**
   - LLM KV-cache
   - LRUæ›¿æ¢
   - TTLç®¡ç†

4. **æ•°æ®ä¸€è‡´æ€§ä¿è¯**
   - äº‹åŠ¡å¤„ç†
   - è¡¥å¿æœºåˆ¶
   - æ•°æ®æ ¡éªŒ

### æ€§èƒ½æŒ‡æ ‡

- **ååé‡**: 63,201 ops/s (æ‰¹é‡ç´¢å¼•)
- **å»¶è¿Ÿ**: <10ms (ç¼“å­˜å‘½ä¸­)
- **å‡†ç¡®ç‡**: æå‡25-40% (å¤šç»´åº¦è¯„åˆ†+é‡æ’åº)

---

## ğŸ”§ æ‰©å±•æ€§è®¾è®¡

### æ’ä»¶åŒ–æ¶æ„

**LLMæä¾›å•†**:
- OpenAI
- DeepSeek
- Google
- Azure
- Local

**å­˜å‚¨åç«¯**:
- LibSQL (åµŒå…¥å¼)
- PostgreSQL
- MySQL
- SQLite

**å‘é‡å­˜å‚¨**:
- LanceDB
- Weaviate
- Qdrant
- Pinecone

**ç¼“å­˜åç«¯**:
- å†…å­˜ç¼“å­˜
- Redis
- Memcached

### é…ç½®çµæ´»æ€§

- âœ… é›¶é…ç½®å¯åŠ¨
- âœ… ç¯å¢ƒå˜é‡é…ç½®
- âœ… é…ç½®æ–‡ä»¶æ”¯æŒ
- âœ… ä»£ç é…ç½®

---

## ğŸ“Š æ¶æ„ä¼˜åŠ¿

1. **æ¨¡å—åŒ–è®¾è®¡**
   - æ¸…æ™°çš„èŒè´£åˆ†ç¦»
   - æ˜“äºæ‰©å±•å’Œç»´æŠ¤

2. **æ€§èƒ½ä¼˜åŒ–**
   - å¤šå±‚ç¼“å­˜
   - æ‰¹é‡å¤„ç†
   - å¹¶è¡Œæ‰§è¡Œ

3. **å‡†ç¡®æ€§æå‡**
   - å¤šç»´åº¦è¯„åˆ†
   - æ™ºèƒ½é‡æ’åº
   - ä¸Šä¸‹æ–‡ç†è§£

4. **æ˜“ç”¨æ€§**
   - é›¶é…ç½®å¯åŠ¨
   - é“¾å¼è°ƒç”¨
   - å‹å¥½é”™è¯¯å¤„ç†

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [APIå‚è€ƒæ–‡æ¡£](../api/api-reference-v3.md)
- [æœ€ä½³å®è·µæŒ‡å—](../guides/best-practices.md)
- [æ€§èƒ½ä¼˜åŒ–æŒ‡å—](../performance/performance-optimization.md)
- [éƒ¨ç½²æŒ‡å—](../deployment/deployment-guide.md)

---

**æ–‡æ¡£ç»´æŠ¤**: AgentMem Team  
**åé¦ˆ**: https://github.com/louloulin/agentmem/issues

